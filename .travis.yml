sudo: true

services:
  - docker

language: node_js

node_js:
  - 11

install:
  - yarn

script:
  - echo "$REGISTRY_USER"
  - curl -L https://github.com/kubernetes/kompose/releases/download/v1.17.0/kompose-linux-amd64 -o kompose
  - chmod +x kompose
  - sudo mv ./kompose /usr/local/bin/kompose
  - echo "$REGISTRY_USER" | docker login -u "$REGISTRY_PASS" --password-stdin
  - cd build
  - kompose up
  - yarn test:coveralls server/build/js/app.test.js
    
notifications:
  email: false